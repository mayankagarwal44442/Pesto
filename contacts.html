<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pesto</title>
    <script src= "React_and_Babel/react.production.min.js"></script>
    <script src= "React_and_Babel/react-dom.production.min.js"></script>
    <!-- Load Babel Compiler -->
		<script src="React_and_Babel/babel.min.js"></script>
		<script src = "index.js"></script>

<style>

.pesto{
  border-radius: 25px;
  background: #73AD21;
  padding: 20px; 
  margin-bottom:30px;
}

</style>

</head>

<body>
<div id='root'></div>


</body> 

</html>	








<script  type="text/babel">

		



class Pesto extends React.Component {

    render(){
        return (
            <div class = "pesto">
                <p> {this.props.text} </p>
            </div>
        );
    }

}


class Pestos extends React.Component {

    constructor(props) {
        super(props);
        this.state = {array_pestos:[]}
    }

    xhr = new XMLHttpRequest();

    assignPestos = () => {
        // console.log(this.xhr.responseText);
        this.setState({array_pestos: (JSON.parse(this.xhr.responseText).pestos).split(';')})
    }

    getPestos(name){
        this.xhr.onload = this.assignPestos;
        this.xhr.open("GET", "http://localhost:3000?name=" + name, true);
        this.xhr.send(); 
    }

    componentDidMount(){
        let pestos = this.getPestos(this.props.name);
    }

    render() {
        return (

                this.state.array_pestos.map((pesto) => (
                    <Pesto text = {pesto} />
                ))
        );				
    }

}

class App extends React.Component {			//extending is important to use functions like componentDidMount


    render() {
        return (
            <div>
                        <Pestos name = "mayank" />
            </div>
        );
    }
}

let element = <App/>	//App is a component. ReactDOM.render calls Apps's render method.
ReactDOM.render(element, document.getElementById('root'));
</script>